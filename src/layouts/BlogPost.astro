---
import type { Props as SEOProps } from "../layouts/Layout.astro";
import MainLayout from "./MainLayout.astro";

export interface Props {
  frontmatter: {
    title: string;
    description: string;
    pubDate?: string;
    updatedDate?: string;
    heroImage?: string;
  };
}

const {
  frontmatter: { title, description, pubDate, updatedDate, heroImage },
} = Astro.props;

const seo: SEOProps = {
  seo: {
    title: `Jan Gradiƒç blog | ${title}`,
    description,
    openGraph: {
      basic: {
        title,
        image: heroImage || "/og.png",
        type: "website",
      },
      /*image: {
        width: 1200,
        height: 630,
        type: "image/png",
        alt: "Hey! I'm Jan, a full stack web developer.",
      },*/
    },
  },
};
---

<MainLayout {...seo}>
  <article class="prose lg:prose-lg xl:prose-xl dark:prose-invert m-auto">
    {heroImage && <img width={720} height={360} src={heroImage} alt="" />}
    <h1 class="title">{title}</h1>
    {
      pubDate && (
        <div>
          Posted on{" "}
          <time datetime={pubDate}>
            {new Date(pubDate).toLocaleDateString("en-us", {
              day: "2-digit",
              month: "long",
              year: "numeric",
            })}
          </time>
        </div>
      )
    }
    {
      updatedDate && (
        <div>
          Last updated on <time>{updatedDate}</time>
        </div>
      )
    }
    <hr />
    <slot />
  </article>
</MainLayout>

<!--<script>
  const themeButton = document.getElementById("themeButton");
  const theme = localStorage.getItem("theme");
  if (theme === "dark") {
    document..classList.add("dark");
  }
  themeButton?.addEventListener("click", () => {
    document.body.classList.toggle("dark");
    localStorage.setItem(
      "theme",
      document.body.classList.contains("dark") ? "dark" : "light"
    );
  });
</script>-->
